name: "Call action manually: framework compose filename"

on:
  workflow_dispatch:
    inputs:
      runner:
        description: "Runner to use (e.g. ubuntu-latest, ubuntu-22.04, windows-latest, etc)"
        type: string
        required: false
        default: ubuntu-latest
      version:
        description: 'OpenDAQ version (if not set, resolves to latest from openDAQ/openDAQ)'
        required: false
      platform:
        description: 'Target platform (if not set, auto-detected)'
        required: false
      packaging:
        description: 'Packaging format for cpack (if not set, uses runner OS name)'
        required: false

jobs:
  test-compose-filename-manually:
    runs-on: ${{ inputs.runner }}
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Compose openDAQ framework filename
      id: call-framework-compose-filename
      uses: ./framework-compose-filename
      with:
        version: ${{ inputs.version }}
        platform: ${{ inputs.platform }}
        packaging: ${{ inputs.packaging }}
    
    - name: Display Results
      shell: bash
      run: |
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo "â•‘                     Package Filename Composition Results                     â•‘"
        echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
        echo "â•‘ ğŸ·ï¸  Version (full):    ${{ steps.call-framework-compose-filename.outputs.version }}"
        echo "â•‘    â”œâ”€ Major:           ${{ steps.call-framework-compose-filename.outputs.version-major }}"
        echo "â•‘    â”œâ”€ Minor:           ${{ steps.call-framework-compose-filename.outputs.version-minor }}"
        echo "â•‘    â”œâ”€ Patch:           ${{ steps.call-framework-compose-filename.outputs.version-patch }}"
        echo "â•‘    â”œâ”€ Suffix:          ${{ steps.call-framework-compose-filename.outputs.version-suffix || '*** NOT SET ***' }}"
        echo "â•‘    â””â”€ Hash:            ${{ steps.call-framework-compose-filename.outputs.version-hash || '*** NOT SET ***' }}"
        echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
        echo "â•‘ ğŸ–¥ï¸  Platform (full):   ${{ steps.call-framework-compose-filename.outputs.platform }}"
        echo "â•‘    â”œâ”€ OS Name:         ${{ steps.call-framework-compose-filename.outputs.platform-os-name }}"
        echo "â•‘    â”œâ”€ OS Version:      ${{ steps.call-framework-compose-filename.outputs.platform-os-version }}"
        echo "â•‘    â””â”€ Architecture:    ${{ steps.call-framework-compose-filename.outputs.platform-os-arch }}"
        echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
        echo "â•‘ ğŸ“¦ Packaging:          ${{ steps.call-framework-compose-filename.outputs.packaging }}"
        echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
        echo "â•‘ ğŸ“„ Filename:           ${{ steps.call-framework-compose-filename.outputs.filename }}"
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
